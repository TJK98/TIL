# TIL - 2025.05.14 - GitHub 협업 방식(PR, Fork)과 브랜치 보호 전략 개념 이해

## 카테고리 🏷️

#TIL #Git #GitHub #Collaboration #PullRequest #Fork #BranchStrategy

---

## 오늘 배운 내용 🔍

- 안전한 협업을 위한 Feature Branch 워크플로우의 개념
- 코드 리뷰 기반의 협업 방식인 Pull Request(PR)의 전체 흐름
- 협업 모델의 두 가지 방식: Collaborator (내부 팀원) vs. Fork (외부 기여자)
- `main` 브랜치의 안정성을 보장하기 위한 Protected Branch 설정
- Fork 기반 오픈소스 기여 방식과 `upstream` 원격 저장소 동기화
- 프로젝트의 정보를 담는 `README.md`의 역할과 기본 마크다운 문법

---

## 어려웠던 점 💣

* Collaborator와 Fork 방식 모두 외부의 기여를 허용한다는 점에서 비슷해 보였지만, 그 권한과 절차는 근본적으로 달랐다. Collaborator는 저장소에 직접 쓰기 권한을 부여받는 '내부자'
  방식이고, Fork는 저장소를 복제하여 별도 공간에서 작업 후 PR로 기여를 '요청'하는 '외부자' 방식이라는 차이를 구분하는 것이 중요했다.

* Fork 기반 작업에서 `origin`은 내 개인 원격 저장소를, `upstream`은 내가 기여하려는 원본 프로젝트의 원격 저장소를 가리킨다는 관계를 파악하는 데 시간이 걸렸다. 코드를 `push`할 때는
  `origin`으로, 원본의 최신 변경사항을 가져올 때는 `upstream`에서 `pull`해야 한다는 흐름을 이해하는 과정이 필요했다.

---

## 정리 🖇️

### 1. Git 협업 워크플로우: 왜 Feature Branch를 사용하는가?

안정적인 프로젝트 관리를 위한 가장 기본적인 브랜치 전략을 학습했다.

* **학습 목표 (Why?)**:
  여러 개발자가 동시에 `main` 브랜치에 직접 커밋하면 충돌이 잦아지고, 불안정한 코드가 주축 브랜치에 섞여 프로젝트 전체의 안정성을 해칠 수 있다. 이를 방지하고, 기능별 개발 단위를 명확히 분리하기
  위함이다.

* **핵심 원리 (What?)**:
    * **중앙집중형 워크플로우**: 모든 팀원이 하나의 `main` 브랜치를 중심으로 작업하는 방식. 소규모 프로젝트에서는 간단할 수 있으나, 충돌 가능성이 높고 관리가 어렵다.
    * **Feature Branch 워크플로우**: 새로운 기능 개발, 버그 수정 등 각 작업 단위를 위한 별도의 브랜치(e.g., `feature/login`)를 생성하여 작업하는 방식. 작업이 완료되면
      `main` 브랜치에 병합(Merge)한다. 이 방식은 `main` 브랜치를 항상 안정적인 상태로 유지할 수 있게 해준다.

* **주의사항 및 실무 팁 (Watch out for)**:
    * Feature Branch 워크플로우는 이후에 배울 Pull Request(PR)와 결합될 때 가장 강력한 협업 모델이 된다.

---

### 2. Pull Request(PR): 코드 리뷰 기반의 협업 방식

Feature Branch에서 완료한 작업을 `main` 브랜치에 반영하기 위한 공식적인 요청 및 소통 절차를 학습했다.

* **학습 목표 (Why?)**:
  내 코드를 동료에게 검토(Code Review)받고, 충분한 논의를 거쳐 안전하게 `main` 브랜치에 통합하기 위함이다. 이는 코드 품질을 높이고 잠재적인 버그를 사전에 발견하는 데 핵심적인 역할을 한다.

* **핵심 원리 (What?)**:
  Pull Request(PR 또는 MR)는 "내가 작업한 브랜치의 내용을 당신의 브랜치로 병합(Merge)해 주세요"라고 공식적으로 요청하는 기능이다. GitHub에서는 PR 페이지를 통해 변경된 코드 내역을
  비교하고, 댓글로 의견을 주고받으며, 자동화된 테스트를 실행하는 등 병합 전 필요한 모든 논의와 검증을 수행할 수 있다.

* **문법 및 사용법 (How?)**: (팀원 기준 Collaborator 모델)
    1. `main` 브랜치를 최신 상태로 `pull` 받는다.
    2. `git switch -c feature/new-function` 명령어로 새로운 기능 브랜치를 생성한다.
    3. 해당 브랜치에서 기능 개발을 완료하고 커밋한다.
    4. `git push origin feature/new-function` 명령어로 원격 저장소에 내 작업 브랜치를 올린다.
    5. GitHub 저장소 페이지에서 "Compare & pull request" 버튼을 눌러 PR을 생성한다.
    6. PR 제목과 설명을 작성하고, 리뷰어를 지정하여 동료에게 코드 리뷰를 요청한다.
    7. 리뷰와 수정이 완료되고 승인(Approve)되면, 저장소 관리자가 PR을 `main` 브랜치에 병합한다.

---

### 3. 두 가지 협업 모델: Collaborator vs. Fork

프로젝트의 성격과 참여자의 신뢰 수준에 따라 기여자를 관리하는 두 가지 방식을 학습했다.

* **학습 목표 (Why?)**:
  프로젝트의 보안과 관리 효율성을 고려하여, 내부 팀원과 외부 기여자를 구분하고 각각에 맞는 적절한 협업 방식을 적용하기 위함이다.

* **핵심 원리 (What?)**:
    * **Collaborator (공동 작업자)**: 저장소에 직접 `push` 할 수 있는 쓰기 권한을 부여받은 사용자. 주로 신뢰할 수 있는 소규모 **내부 팀 프로젝트**에서 사용된다. 권한을 받은 팀원도
      `main`에 직접 `push`하기보다는, 위에서 설명한 PR을 통해 작업하는 것이 일반적이다.
    * **Fork (포크)**: 다른 사람의 원격 저장소를 내 계정으로 그대로 복제하는 기능. 원본 저장소에 대한 아무런 권한이 없는 **외부 기여자**가 코드에 기여하고 싶을 때 사용한다. 주로 **오픈소스
      프로젝트**에서 활용된다.

* **문법 및 사용법 (How?)**: (Fork 기반 기여 흐름)
    1. 기여하고 싶은 원본 저장소를 GitHub에서 **Fork**한다.
    2. Fork로 생성된 **내 원격 저장소**를 로컬에 `clone`한다.
    3. `git remote add upstream <원본 저장소 주소>` 명령어로 원본 저장소를 `upstream`이라는 이름으로 등록한다.
    4. 작업 전, `git pull upstream main` 명령어로 원본 저장소의 최신 변경사항을 내 로컬 `main`에 동기화한다.
    5. 새로운 기능 브랜치를 생성하여 작업하고, `git push origin <내 기능 브랜치>`로 **내 원격 저장소**에 올린다.
    6. GitHub에서 내 저장소의 브랜치를 **원본 저장소(`upstream`)**의 `main` 브랜치로 보내는 PR을 생성한다.

* **주의사항 및 실무 팁 (Watch out for)**:
    * Fork 모델의 핵심은 **`push`는 내 저장소(`origin`)로, `pull`은 원본 저장소(`upstream`)에서** 한다는 점이다. 이를 통해 내 작업 공간과 원본 프로젝트를 분리하면서도,
      지속적으로 최신 상태를 유지할 수 있다.

---

### 4. 저장소 보호 전략: Protected Branch

`main`과 같이 중요한 브랜치에 의도치 않은 변경이 발생하는 것을 막는 기술적인 안전장치를 학습했다.

* **학습 목표 (Why?)**:
  핵심 브랜치의 안정성과 코드 품질을 강제하기 위함이다. 사람이 실수하더라도 시스템이 최소한의 규칙을 지켜주도록 설정하는 것이다.

* **핵심 원리 (What?)**:
  Protected Branch는 특정 브랜치에 적용되는 규칙들의 집합이다. GitHub 저장소의 `Settings > Branches` 메뉴에서 설정할 수 있으며, 주요 규칙은 다음과 같다.
    * **Require a pull request before merging**: 해당 브랜치에 직접 `push`하는 것을 금지하고, 반드시 PR을 통해서만 병합할 수 있도록 강제한다.
    * **Require approvals**: 지정된 수 이상의 동료에게 리뷰 승인(Approve)을 받아야만 병합할 수 있도록 설정한다.
    * **Prevent force pushes**: `git push --force` 명령어로 강제로 기록을 덮어쓰는 행위를 막는다.

---

## 오늘의 깨달음 💡

* GitHub 협업은 단순히 코드를 공유하는 것을 넘어, '권한 관리', '코드 리뷰', '브랜치 무결성 유지'를 포함하는 체계적인 **프로세스를 설계**하는 것임을 이해했다.

* Collaborator(내부 팀)와 Fork(외부 기여자)는 협업의 신뢰 수준과 규모에 따라 선택하는 명확히 다른 모델이다. 소규모 팀에서는 신뢰를 바탕으로 권한을 공유하고, 대규모 오픈소스에서는 신뢰가 없는
  상태에서도 안전하게 기여를 받을 수 있는 구조를 채택한다.

* Protected Branch는 `main` 브랜치의 안정성을 보장하는 기술적인 안전장치이자, 팀의 코드 품질을 유지하기 위한 최소한의 규칙임을 깨달았다. 이는 '실수하지 말자'는 약속을 넘어, '실수할 수 없는
  환경'을 만드는 것이다.